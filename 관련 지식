OCV란 
On Chip Variation (OCV) 반도체 칩 안에서 생기는 여러 가지 작은 차이를 의미하며 이 차이들은 보통 칩을 만들 때 생기는 미세한 오차나, 작동할 때의 온도나 전압 변화 때문에 생기는 데 이런 변화는 회로가 제대로 동작하지 않게 만들 수 있기 때문에, 설계할 때 꼭 고려해야 하는 것들중 하나이다.
특히 요즘처럼 한 칩에 수십억 개의 트랜지스터가 들어가는 초대형 집적 회로(VLSI)에서는 이런 작은 변화가 전체 동작에 큰 영향을 줄 수 있는데 그래서 OCV를 잘 관리하지 않으면, 속도는 느려지고, 전력은 더 많이 들고, 오류도 생길 수 있기 떄문에 OCV관리가 중요하다
OCV가 생기는 여러 가지 이유가 있지만 그중에서 공정 변동(Process Variation)은 칩을 만들 때마다 조금씩 다르게 만들어질 수 있는데 예를 들어, 트랜지스터의 크기나 metal 두께가 미세하게 다를 수 있어 이런 작은 차이들이 쌓여서 전체 회로 성능에 영향을 주는 현상이 Process Variation이다.
온도와 전압의 변화 (Temperature & Voltage Variation)은 칩이 작동할 때, 온도나 전압이 바뀌면 회로 내부에서 흐르는 전류나 신호의 속도가 달라지는데 예를 들어, 온도가 높아지면 회로가 더 느려질 수 있다.
OCV를 분석하는 방법은 여러 가지가 존재하는데 그 중에서 먼저 타이밍 분석 (Timing Analysis)은 회로가 제시간에 동작하는지를 확인하는 과정인데 이때 OCV를 고려해서 각 신호 경로가 얼마나 늦어질 수 있는지 계산하고, 문제가 생기는 경로가 있는지 체크해야 한다.
두 번째로 동적 시뮬레이션 (Dynamic Simulation)은 시간이 흐름에 따라 회로가 어떻게 동작하는지 실제로 시뮬레이션해보는 방법인데 이때 여러 가지 조건(온도, 전압 변화 등)을 넣어서 테스트하고, 문제가 생기면 미리 수정할 수 있게 하는 것이 Dyanamic Simulation이다
OCV를 해결하는 방법은 스탠다드 셀을 더 정밀하게 설계하거나, margin을 넉넉히 주거나, 다양한 조건에서 시뮬레이션을 돌려서 미리 문제를 예측이 가능하다. 이렇게 하면 OCV가 있어도 회로가 안정적으로 잘 동작할 수 있다.

AOCV란
AOCV (Advanced On-Chip Variation)는 기존 OCV보다 더 정밀하게 회로의 타이밍 변화를 분석하는 방법인데 기존 OCV는 모든 셀에 같은 여유 시간(derate)을 적용하지만, AOCV는 각 셀의 위치, 종류, 경로 깊이 등을 고려해서 셀마다 다른 derate 값을 적용하는 방법이다.
이 방법을 사용하면 더 정확하고 timing이 덜 느려지는 분석을 가능하게 한다.
AOCV가 영향을 받는 주요 요소는 첫 번째로 거리 (Distance)가 있는데 이는 셀 간의 물리적인 거리를 의미하는데 거리가 멀어지면 변화가 커지기 때문에 더 큰 derate 값을 적용해야한다. 아래 그림은 거리의 예시를 보여주는 그림이다


다음으로 영향을 주는 요소는 경로 깊이 (Path Depth)인데 셀이 타이밍 경로상에서 얼마나 많이 연결되어 있는지를 보는 것인데. 깊이가 깊어질수록 무작위 Variation은 서로 상쇄돼서 derate 값이 오히려 줄어드는 경향이 있다. 
아래 그림은 Path Depth에 대한 예시를 보여주는 그림입니다


다음으로 셀 종류 (Cell Type)가 있는데 이는 셀의 기능(AND, OR 등)이나 구동 강도(X2, X4, X6 등)에 따라 derate 값이 달라진다. 예를 들어 AND2X2보다 AND2X6이 더 강한 구동을 갖기 때문에 derate도 다르다
AOCV 분석 두가지의 분석모드가 존재하는데 그 중 하나는 Clock only 모드로 AOCV가 클럭 경로에만 적용되고 분석 속도가 빠르고 런타임이 짧다. 그래서 빠른 분석이 필요할 때 사용한다. 그 다음으로는 Clock and Data 모드가 있는데 이는 AOCV가 회로 전체에 적용이 된다. 회로 전체에 AOCV가 적용이 되면 더 정확한 결과를 얻을 수 있고 clock뿐 아니라 데이터 경로에서도 timing margin을 분석한다
AOCV Table 이라는 용어가 존재하는데 이때 AOCV Table이란 AOCV를 사용할 때는 각 셀에 대해 derate 테이블이 필요한데 그때 셀의 위치나 경로 특성에 따라 derate 값을 다르게 적용하게 도와준다. 

table에도 두가지 종류가 있다 하나는 1D, 다른 하는 2D가 있는데 1D 테이블은 거리 또는 깊이에 따라 derate 값 적용 테이블이고 2D 테이블은 거리와 깊이 모두 고려해서 더 정밀하게 분석하는 테이블이다.

AOCV의 장점은 기존 OCV보다 Timing Variation이 줄어들어 덜 보수적이고 경로별 특성을 반영해 더 정확한 분석 가능하며, Clock 경로만 분석해도 빠르고 효율적으로 설계 검토 가능하다 .이를 기본 OCV만 적용 할 때보다 더 많은 타이밍 문제 해결이 가능해진다.
POCV란
POCV (Parametric On-Chip Variation)는 복잡한 통계 라이브러리를 만들지 않고도, 정확하고 통계적인 타이밍 분석을 가능하게 해주는 방법이다. POCV는 지연 값의 평균(µ)과 변동(σ)을 사용하는데, 기존 OCV처럼 delay의 최소/최대 값을 사용하는 것이 아니라, delay의 평균값을 기준으로 랜덤한 변화를 모델링해서 그때의 delay는 정규분포를 따른다고 가정한다.

정규분포란 대부분의 값이 평균 주변에 모여 있는 통계 분포인데 예를 들면
평균 ±1σ 안에 약 68% ±2σ 안에 약 95% ±3σ 안에 약 99.7%의 데이터가 들어갑니다. 
아래 그림은 정규 분포의 예시를 보여주는 그림입니다


지연 변동값(σ)은 외부에서 불러오는데 이는 타이밍 라이브러리 또는 외부 파일에 저장된 POCV 계수(C)를 통해 σ 값을 얻는다.
각 Timing 아크(arc)의 delay 계산 방식은 셀의 평균 delay값 + variation값을 통계적으로 더해서 delay값을 계산하고 이 값을 각 셀 경로마다 계산해서 전체 경로 delay값을 합산하고,
이를 타이밍 분석에 적용 할 수 있는데 이렇게 계산된 경로 delay를 가지고 setup/hold Timing 분석을 한다. 기본적으로는 평균에서 ±3σ 범위를 기준으로 분석하지만, 원하면 다른 σ 값도 사용할 수 있다.
POCV의 장점은 복잡한 통계 라이브러리 없이도 정확한 분석이 가능하고 셀의 평균 delay값과 Variation값만으로 통계 기반 타이밍 분석이 가능하며 표준편차 값 조정하여 더 보수적이거나 더 빠른 분석 가능하여 기존 derate 기반 분석보다 현실적인 타이밍 예측이 가능하다.
